@model NotesManager.Models.Note

@{
    ViewData["Title"] = "Edit Note";
}

<div class="page-header">
    <h1>Edit Note</h1>
</div>

<div class="form-container">
    <form asp-action="Edit" method="post">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="NoteId" />
        <input type="hidden" asp-for="CreatedDate" />
        
        <div class="form-group">
            <label asp-for="NoteName" class="form-label">Note Name</label>
            <input asp-for="NoteName" class="form-control" />
            <span asp-validation-for="NoteName" class="error-message"></span>
        </div>
        
        <div class="form-group">
            <label asp-for="Content" class="form-label">Content</label>
            <textarea asp-for="Content" class="form-control" rows="15"></textarea>
            <span asp-validation-for="Content" class="error-message"></span>
        </div>
        
        <div class="form-actions">
            <a asp-action="Index" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
    </form>
</div>

@section Scripts {
    <script>
        // Keyboard shortcut: Ctrl+S to save
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                document.querySelector('form').submit();
            }
        });
        
        // Warn on unsaved changes
        let formChanged = false;
        document.querySelectorAll('input, textarea').forEach(el => {
            el.addEventListener('input', () => formChanged = true);
        });
        
        window.addEventListener('beforeunload', function(e) {
            if (formChanged) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
        
        document.querySelector('form').addEventListener('submit', () => formChanged = false);
    </script>
}
